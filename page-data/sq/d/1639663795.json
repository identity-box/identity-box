{"data":{"site":{"siteMetadata":{"title":"Identity Box"},"fields":{"mdx":true}},"menuButton":null,"config":{"nodes":[{"tag":"user","title":"Identity Box"},{"tag":"developer","title":"Developers"},{"tag":"beta","title":"Early Adopters"},{"tag":"component","title":"Components"},{"tag":"service","title":"Services"},{"tag":"utils","title":"Utils"}]},"navigation":{"docs":[{"node":{"frontmatter":{"title":"Contributing","path":"/developers/contributing","tag":"developer","sortIndex":10,"content":{"childMarkdownRemark":{"html":"<h1 id=\"contributing\" style=\"position:relative;\"><a href=\"#contributing\" aria-label=\"contributing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contributing</h1>\n<blockquote>\n<p>Working on your first Pull Request? You can learn how from this <em>free</em> series\n<a href=\"https://egghead.io/series/how-to-contribute-to-an-open-source-project-on-github\">How to Contribute to an Open Source Project on\nGitHub</a></p>\n</blockquote>\n<h2 id=\"quick-start\" style=\"position:relative;\"><a href=\"#quick-start\" aria-label=\"quick start permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Quick start</h2>\n<p>After you clone your forked repo, follow the following steps to bootstrap your\nlocal environment:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">¬ª <span class=\"token function\">yarn</span> <span class=\"token function\">install</span>\n¬ª <span class=\"token function\">yarn</span> setup:dev\n¬ª <span class=\"token function\">yarn</span> <span class=\"token builtin class-name\">test</span>\n¬ª <span class=\"token punctuation\">(</span>cd workspaces/homepage <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">yarn</span> develop<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># or to get everything like in production</span>\n¬ª now dev</code></pre></div>\n<h2 id=\"code-organization\" style=\"position:relative;\"><a href=\"#code-organization\" aria-label=\"code organization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code organization</h2>\n<p>Identity Box is a monorepo. It consists of a number of packages that all live under the <code class=\"language-text\">workspaces</code> folder. We use a combination of <a href=\"https://lernajs.io\">lerna</a> and <a href=\"https://yarnpkg.com/lang/en/docs/workspaces/\">yarn\nworkspaces</a> to manage them.</p>\n<h3 id=\"yarn-install\" style=\"position:relative;\"><a href=\"#yarn-install\" aria-label=\"yarn install permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>yarn install</h3>\n<p>We install all mono-repo dependencies with single top-level <code class=\"language-text\">yarn install</code> or just <code class=\"language-text\">yarn</code>.</p>\n<h2 id=\"building-packages\" style=\"position:relative;\"><a href=\"#building-packages\" aria-label=\"building packages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building packages</h2>\n<p>Because our monorepo contains a number of <em>packages</em> under the <code class=\"language-text\">workspaces</code> directory, some of them may need to be build before they can be published.\nThe build command uses <code class=\"language-text\">lerna</code> in order to trigger the build script\nfor every single workspace. Please use a convenience script <code class=\"language-text\">build</code> defined in the root <code class=\"language-text\">package.json</code>.</p>\n<h3 id=\"run-tests\" style=\"position:relative;\"><a href=\"#run-tests\" aria-label=\"run tests permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run tests</h3>\n<p>We run all the tests from the top level - this is far more efficient\nespecially if the number of workspaces in the monorepo increases:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">¬ª <span class=\"token function\">yarn</span> <span class=\"token builtin class-name\">test</span>\n¬ª <span class=\"token function\">yarn</span> <span class=\"token builtin class-name\">test</span> --no-cache    // good to know this\n¬ª <span class=\"token function\">yarn</span> jest <span class=\"token parameter variable\">--clearCache</span>  // a <span class=\"token function\">nice</span> one</code></pre></div>\n<h3 id=\"confluenza-based-homepage\" style=\"position:relative;\"><a href=\"#confluenza-based-homepage\" aria-label=\"confluenza based homepage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Confluenza-based homepage</h3>\n<p>This is our landing page. It uses <a href=\"https://confluenza.online\">Confluenza</a>, which is based on <a href=\"https://www.gatsbyjs.org/\">Gatsby</a>.</p>\n<p>To start development server or to build version that is ready for distribution you can run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">¬ª <span class=\"token builtin class-name\">cd</span> workspaces/homepage\n¬ª <span class=\"token function\">yarn</span> develop\n¬ª <span class=\"token function\">yarn</span> build</code></pre></div>\n<h2 id=\"using-now-dev\" style=\"position:relative;\"><a href=\"#using-now-dev\" aria-label=\"using now dev permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using now dev</h2>\n<p>Take advantage of <code class=\"language-text\">now dev</code> to run a development server and have a mirror of your production hot-reloading. Read more at <a href=\"https://zeit.co/blog/now-dev\">Introducing <code class=\"language-text\">now dev</code> ‚Äì Serverless, on localhost</a>.</p>\n<h2 id=\"babel-7\" style=\"position:relative;\"><a href=\"#babel-7\" aria-label=\"babel 7 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Babel 7</h2>\n<p>We use Babel 7.</p>\n<p>Babel 7 has changed in how babel configuration is discovered.</p>\n<p>It allows three different configuration files: <code class=\"language-text\">babel.config.js</code>,\n<code class=\"language-text\">.babelrc.js</code>, and the familiar <code class=\"language-text\">.babelrc</code>. The semantics of file\ndiscovery have changed. If <code class=\"language-text\">babel.config.js</code> is present at your\ncurrent working directory, only this file will be used and <code class=\"language-text\">.babelrc</code>\nand <code class=\"language-text\">.babelrc.js</code> will be ignored (and it does not matter if they are\nin your <code class=\"language-text\">cwd</code> or in one of the subfolders).</p>\n<p>If <code class=\"language-text\">babel.config.js</code> is not present, you can decide to either use\n<code class=\"language-text\">.babelrc</code> for static configuration or <code class=\"language-text\">.babelrc.js</code> if you prefer to\nprogrammatically create your configuration. If you use the <code class=\"language-text\">.babelrc</code> variant, please notice that Babel 7 will look for a <code class=\"language-text\">.babelrc</code> in the current directory. If Babel finds\nother <code class=\"language-text\">.babelrc</code> files while transpiling files in a subfolder, it will merge the configurations together.</p>\n<p>Because our packages share the same Babel configuration, we chose\nto create a single top-level <code class=\"language-text\">babel.config.js</code> where we can\nprogrammatically create the configuration based on the <code class=\"language-text\">BABEL_ENV</code> and\n<code class=\"language-text\">NODE_ENV</code> environment variables. The same configuration file is used\nto run jest tests.</p>\n<p>We could not avoid having babel configurations in subfolders because\nthe babel 7 does not continue searching above the first <code class=\"language-text\">package.json</code> that it finds, and we run the <code class=\"language-text\">yarn build</code> command for the packages via top-level <code class=\"language-text\">yarn lerna run build</code>, which means it will be executed from the package folder.</p>\n<p>Fortunately, we are able to reuse the top-level\n<code class=\"language-text\">babel.config.js</code> by having the package-specific <code class=\"language-text\">babel.config.js</code>\nwith just the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">extends</span><span class=\"token operator\">:</span> <span class=\"token string\">'../../babel.config.js'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Alternatively, you can also use <code class=\"language-text\">.babelrc.js</code> with the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> babelConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../../babel.config'</span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> babelConfig</code></pre></div>\n<blockquote>\n<p>In this case, make sure that you do not use the <code class=\"language-text\">--no-babelrc</code></p>\n</blockquote>\n<p>option in any of the babel commands in the <code class=\"language-text\">tools/build.js</code> top-level\nscript.</p>\n<p>So to summarize, we have a top-level <code class=\"language-text\">babel.config.js</code> and then for each package that we intend to publish to npm registry or which needs a custom babel configuration we have a <code class=\"language-text\">babel.config.js</code> file in the corresponding workspace directory.</p>\n<blockquote>\n<p>Please notice that we run tests from the top-running of the tests is nicely handled by the top-level <code class=\"language-text\">babel.config.js</code>.</p>\n</blockquote>\n<h3 id=\"read-more-about-babel\" style=\"position:relative;\"><a href=\"#read-more-about-babel\" aria-label=\"read more about babel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Read more about babel</h3>\n<p>In order to get a better grip on Babel 7 and how does it handle configuration files in version 7,\nplease refer to the following documents:</p>\n<ol>\n<li><a href=\"https://babeljs.io/docs/en/configuration\">Configure Babel</a></li>\n<li><a href=\"https://babeljs.io/docs/en/config-files\">Config Files</a></li>\n</ol>\n<h2 id=\"staying-in-sync-with-upstream\" style=\"position:relative;\"><a href=\"#staying-in-sync-with-upstream\" aria-label=\"staying in sync with upstream permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Staying in sync with upstream</h2>\n<p>You can follow the steps described in <a href=\"https://help.github.com/articles/syncing-a-fork/\">Syncing a\nfork</a>. We recommend that you\nkeep your local master branch pointing to the upstream master branch. Remaining\nin sync then becomes really easy:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> upstream https://github.com/marcinczenko/identity-box.git\n<span class=\"token function\">git</span> fetch upstream\n<span class=\"token function\">git</span> branch --set-upstream-to<span class=\"token operator\">=</span>upstream/master master</code></pre></div>\n<p>Now, when you do <code class=\"language-text\">git pull</code> from your local <code class=\"language-text\">master</code> branch git will\nfetch changes from the <code class=\"language-text\">upstream</code> remote. Then you can make all of\nyour pull request branches based on this <code class=\"language-text\">master</code> branch.</p>\n<h2 id=\"submitting-a-pull-request\" style=\"position:relative;\"><a href=\"#submitting-a-pull-request\" aria-label=\"submitting a pull request permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Submitting a Pull Request</h2>\n<p>Please go through existing issues and pull requests to check if\nsomebody else is already working on it, we use <code class=\"language-text\">someone working on it</code>\nlabel to mark such issues.</p>\n<h2 id=\"creating-releases\" style=\"position:relative;\"><a href=\"#creating-releases\" aria-label=\"creating releases permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating releases</h2>\n<p>We define a release as a sequence of Pull Requests. When creating a pull request that\nshould be part of a next release, we add one of the following labels to it:</p>\n<ul>\n<li>PR: Breaking Change üí£,</li>\n<li>PR: New Feature üöÄ,</li>\n<li>PR: Enhancement üòª,</li>\n<li>PR: Bug Fix üêõ,</li>\n<li>PR: Documentation üìñ,</li>\n<li>PR: Refactoring üî®</li>\n</ul>\n<p>Some discipline is required to make sure that a pull request is focused on one of the above\nmentioned categories. One can say that our releases are pull-request-oriented rather than commit oriented.\nThis allows us to have enough information and structure while leaving a level of freedom. This is in contrast to so-called <em>conventional commits</em>, where each commit must adhere to a set of predefined formatting rules. We find this restriction an inconvenience.</p>\n<p>We use <a href=\"https://www.npmjs.com/package/lerna-changelog\">lerna-changelog</a> to have some level of automation, so that not everything needs to be done by hand. We describe the process of creating a release below.</p>\n<h3 id=\"publishing-packages\" style=\"position:relative;\"><a href=\"#publishing-packages\" aria-label=\"publishing packages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Publishing packages</h3>\n<p>Because we have consciously chosen to have one version for all our packages, it is important to run <code class=\"language-text\">lerna publish</code> with <code class=\"language-text\">--force-publish</code> option:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> lerna publish --force-publish</code></pre></div>\n<p>This will not only remove confusion among our users, but will also make releases easier to follow.</p>\n<h3 id=\"updating-changelogmd\" style=\"position:relative;\"><a href=\"#updating-changelogmd\" aria-label=\"updating changelogmd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Updating CHANGELOG.md</h3>\n<p>After packages are published and all relevant Pull Requests are merged to the master branch, we run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> lerna-changelog <span class=\"token parameter variable\">--from</span><span class=\"token operator\">=</span>vx.y.z <span class=\"token parameter variable\">--to</span><span class=\"token operator\">=</span>vX.Y.Z</code></pre></div>\n<p>where <code class=\"language-text\">vx.y.z</code> refers to the release tag preceding the most recent tag <code class=\"language-text\">vX.Y.Z</code>. Foe example, if last release was tagged <code class=\"language-text\">v1.0.18</code> and the tag for the candidate release already merged and pushed to master is <code class=\"language-text\">v1.0.19</code>, then the command would be:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> lerna-changelog <span class=\"token parameter variable\">--from</span><span class=\"token operator\">=</span>v1.0.18 <span class=\"token parameter variable\">--to</span><span class=\"token operator\">=</span>v1.0.19</code></pre></div>\n<p>The output of this command should be then manually prepended to <code class=\"language-text\">CHANGELOG.md</code> and pushed to the master branch.</p>\n<h3 id=\"draft-a-new-release\" style=\"position:relative;\"><a href=\"#draft-a-new-release\" aria-label=\"draft a new release permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Draft a new release</h3>\n<p>On github, use <em>Draft a new release</em> using the output of the <code class=\"language-text\">lerna-changelog</code> command as the input.\nAdjust the fields so that the new release follows the structure of previous releases (unless a new formatting is desired).</p>\n<h3 id=\"read-more-about-releasing-code\" style=\"position:relative;\"><a href=\"#read-more-about-releasing-code\" aria-label=\"read more about releasing code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Read more about releasing code</h3>\n<ul>\n<li><a href=\"https://github.com/lerna/lerna-changelog\">lerna-changelog</a></li>\n<li><a href=\"https://medium.com/angular-in-depth/release-management-in-angular-with-lerna-21b4ab417c59\">using conventional commits with lerna</a></li>\n<li><a href=\"https://semantic-release.gitbook.io/semantic-release/\">semantic-release</a></li>\n<li><a href=\"https://github.com/semantic-release/semantic-release/issues/193\">semantic-release and monorepos discussion</a></li>\n</ul>\n<h2 id=\"manual-lets-encrypt-certificates\" style=\"position:relative;\"><a href=\"#manual-lets-encrypt-certificates\" aria-label=\"manual lets encrypt certificates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Manual Let's Encrypt certificates</h2>\n<p>On Identity Box we run Nginx server and we use Let's Encrypt certificates. We generate (and renew) certificates manually using the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> certbot <span class=\"token comment\"># only first time</span>\n$ <span class=\"token function\">sudo</span> certbot certonly <span class=\"token parameter variable\">--server</span> https://acme-v02.api.letsencrypt.org/directory <span class=\"token parameter variable\">--manual</span> --preferred-challenges dns <span class=\"token parameter variable\">-d</span> *.idbox.online</code></pre></div>\n<p>You will be asked to add a <code class=\"language-text\">TXT</code> DNS record to your domain DNS configuration.</p>\n<p>It is a good idea to backup your certificates:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">tar</span> czvf letsencrypt-idbox.tar.gz /etc/letsencrypt</code></pre></div>\n<p>and store them safely on another machine.</p>","headings":[{"value":"Quick start"},{"value":"Code organization"},{"value":"Building packages"},{"value":"Using now dev"},{"value":"Babel 7"},{"value":"Staying in sync with upstream"},{"value":"Submitting a Pull Request"},{"value":"Creating releases"},{"value":"Manual Let's Encrypt certificates"}]}}},"headings":[]}},{"node":{"frontmatter":{"title":"Box Office","path":"/services/box-office","tag":"service","sortIndex":10,"content":{"childMarkdownRemark":{"html":"<h1 id=\"box-office\" style=\"position:relative;\"><a href=\"#box-office\" aria-label=\"box office permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Box Office</h1>\n<p>A service to handle identity requests on IdBox.</p>\n<blockquote>\n<p>Since version <code class=\"language-text\">0.1.38</code> all Identity Box services are ESM-only. No building is required.</p>\n</blockquote>\n<h2 id=\"installation\" style=\"position:relative;\"><a href=\"#installation\" aria-label=\"installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation</h2>\n<p>On your identity-box, first create a folder where you want your service to be installed (we recommend that you use the name of the service as the name of the folder). Then install the service as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ npx github:/identity-box/cli install-service box-office</code></pre></div>\n<h2 id=\"usage\" style=\"position:relative;\"><a href=\"#usage\" aria-label=\"usage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usage</h2>\n<p>To directly run the service, use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> box-office start</code></pre></div>\n<h2 id=\"with-pm2\" style=\"position:relative;\"><a href=\"#with-pm2\" aria-label=\"with pm2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>With PM2</h2>\n<p>You can take of advantage of pm2 to start an identity-box service. Make sure you have pm2 installed globally:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> pm2 <span class=\"token parameter variable\">-g</span></code></pre></div>\n<h3 id=\"start-service\" style=\"position:relative;\"><a href=\"#start-service\" aria-label=\"start service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start service</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 start ecosystem.config.cjs</code></pre></div>\n<h3 id=\"list-all-services\" style=\"position:relative;\"><a href=\"#list-all-services\" aria-label=\"list all services permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>List all services</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 list</code></pre></div>\n<h3 id=\"settings-on-a-service\" style=\"position:relative;\"><a href=\"#settings-on-a-service\" aria-label=\"settings on a service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Settings on a service</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 show box-office</code></pre></div>\n<h3 id=\"logs\" style=\"position:relative;\"><a href=\"#logs\" aria-label=\"logs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Logs</h3>\n<p>To show both stdout and stderr logs run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 logs box-office</code></pre></div>\n<p>This shows all the logs of box-office and outputs the last 15 lines (the default).</p>\n<p>To see only standard output logs, and print more lines from the output use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 logs box-office <span class=\"token parameter variable\">--out</span> <span class=\"token parameter variable\">--lines</span> <span class=\"token number\">150</span></code></pre></div>\n<h3 id=\"restart-process-after-editing-ecosystem\" style=\"position:relative;\"><a href=\"#restart-process-after-editing-ecosystem\" aria-label=\"restart process after editing ecosystem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Restart process after editing ecosystem</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 delete ecosystem.config.cjs\n$ pm2 start ecosystem.config.cjs</code></pre></div>","headings":[{"value":"Installation"},{"value":"Usage"},{"value":"With PM2"}]}}},"headings":[]}},{"node":{"frontmatter":{"title":"Identity App","path":"/services/idapp","tag":"service","sortIndex":20,"content":{"childMarkdownRemark":{"html":"<h1 id=\"identity-app\" style=\"position:relative;\"><a href=\"#identity-app\" aria-label=\"identity app permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Identity App</h1>\n<p>Identity App to work with Identity Box. It is built with <a href=\"https://expo.dev\">Expo</a>, current SDK is <code class=\"language-text\">SDK 46</code>.</p>\n<h2 id=\"app-configuration\" style=\"position:relative;\"><a href=\"#app-configuration\" aria-label=\"app configuration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>App configuration</h2>\n<p>The app does not currently require any configuration.</p>\n<blockquote>\n<p>In case one is needed in the future, it can be provided in one of the configuration files (<code class=\"language-text\">*.config.js</code>).</p>\n</blockquote>\n<p>All the constants from the config file will be added to <code class=\"language-text\">app.json</code>\nunder the <code class=\"language-text\">extra</code> key. The <code class=\"language-text\">app.json</code> is created by adding this\n<code class=\"language-text\">extra</code> key to the contents of the <code class=\"language-text\">config.json</code>.\nTherefore before running <code class=\"language-text\">yarn expo start</code> or any other expo command,\nplease make sure you select the correct configuration by\nrunning <code class=\"language-text\">expo-env --env=&lt;your-configuration></code>. This will properly\npopulate the <code class=\"language-text\">extra</code> entry of the <code class=\"language-text\">app.json</code> making it visible\nto the app via <code class=\"language-text\">Constants.manifest.extra</code>.\nFor more information check <a href=\"https://www.npmjs.com/package/expo-env\">expo-env</a>.</p>\n<h2 id=\"preparing-for-distribution\" style=\"position:relative;\"><a href=\"#preparing-for-distribution\" aria-label=\"preparing for distribution permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Preparing for distribution</h2>\n<p>Below the steps to prepare the app for distribution.</p>\n<h3 id=\"update-buildversion-number-for-the-app\" style=\"position:relative;\"><a href=\"#update-buildversion-number-for-the-app\" aria-label=\"update buildversion number for the app permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Update build/version number for the app</h3>\n<p>In <code class=\"language-text\">config.json</code> we have two attributes related to versioning of the app: <code class=\"language-text\">version</code> and <code class=\"language-text\">ios.buildNumber</code>. Before publishing the app to TestFlight one of the two needs to be updated. Currently we keep <code class=\"language-text\">version</code> fixed to <code class=\"language-text\">1.0.0</code>, and for each new build we just increase the build number.</p>\n<blockquote>\n<p>Here we are concerned with the iOS build, but notice that there is also attribute <code class=\"language-text\">android.versionCode</code> which plays the same role as <code class=\"language-text\">ios.buildNumber</code>. When increasing <code class=\"language-text\">ios.buildNumber</code> we also increase <code class=\"language-text\">android.versionCode</code>.</p>\n</blockquote>\n<h3 id=\"apply-the-build-configuration\" style=\"position:relative;\"><a href=\"#apply-the-build-configuration\" aria-label=\"apply the build configuration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Apply the build configuration</h3>\n<p>Run <code class=\"language-text\">yarn env:prod</code> from the terminal.</p>\n<blockquote>\n<p>All commands need to be run from the <code class=\"language-text\">workspaces/idapp</code> folder.</p>\n</blockquote>\n<blockquote>\n<p>Remember to issue <code class=\"language-text\">yarn build</code> at the root of the repo to build all dependencies. In the future we will move the whole build to the CI, but for know this has to be locally on your machine. This is not really needed you build on EAS server, as we make sure that local packages are build automatically there (see <code class=\"language-text\">postinstall</code> script in the root <code class=\"language-text\">package.json</code>).</p>\n</blockquote>\n<h2 id=\"expo-eas\" style=\"position:relative;\"><a href=\"#expo-eas\" aria-label=\"expo eas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Expo EAS</h2>\n<p>With <code class=\"language-text\">SDK 45</code>, expo introduced <a href=\"https://expo.dev/eas\">Expo Application Services</a>. It is a serious improvement over previous <code class=\"language-text\">expo-cli</code>, which significantly improves developer experience when working with Expo.</p>\n<p>For a good overview, we recommend <a href=\"https://blog.expo.dev/development-builds-are-out-of-preview-7e5b1979f84b\">Development Builds Are Out of Preview</a>.</p>\n<p>In what follows we show how to work with Expo and Identity App using the newly introduced Expo tools.</p>\n<p>Expo comes with two CLI tools: <code class=\"language-text\">expo-cli</code> and <code class=\"language-text\">eas-cli</code>. <code class=\"language-text\">expo-cli</code> we already know, this is how we <em>used to</em> work with expo using <code class=\"language-text\">expo start --ios</code> and <code class=\"language-text\">expo build:ios</code>. The output was an <code class=\"language-text\">ipa</code> file we could submit to App Store using <a href=\"https://apps.apple.com/us/app/transporter/id1450874784?mt=12\">Apple Transporter</a>.</p>\n<blockquote>\n<p>We leave a summary of the legacy instructions below for the reference.</p>\n</blockquote>\n<blockquote>\n<p>Notice that <a href=\"https://blog.expo.dev/turtle-goes-out-to-sea-d334db2a6b60\">2022 is the final year the Classic Build service will be available</a>. It is time to switch to EAS.</p>\n</blockquote>\n<p>When developing Expo applications we use <a href=\"https://expo.dev/client\">Expo Go</a> - a free app to launch your app on an iOS or Android device. With EAS, we can still use Expo Go, but we can also something called <a href=\"https://docs.expo.dev/development/introduction/\">development builds</a>. In short, using development builds, we can create our own version of <a href=\"https://expo.dev/client\">Expo Go</a> app, specially crafted for our project and containing only relevant native modules. Having a development build installed on the device, you can then conveniently develop as when you used the Expo Go app before. Expo Go is just replaced by your own app.</p>\n<p>For more info:</p>\n<ul>\n<li><a href=\"https://docs.expo.dev/development/build/\">Creating Development Builds</a></li>\n<li><a href=\"https://docs.expo.dev/development/getting-started/\">Getting Started</a></li>\n</ul>\n<h2 id=\"how-to-create-a-development-build\" style=\"position:relative;\"><a href=\"#how-to-create-a-development-build\" aria-label=\"how to create a development build permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to create a development build</h2>\n<p><a href=\"https://docs.expo.dev/development/build/\">Expo documentation</a> is pretty exhaustive, so here just a summary and some observations.</p>\n<p>You can either create the development build on the EAS server (up the free tier, after which you will need to pay) or your own local xcode distribution. The command to build a development build app on the eas server is (here, we focus on ios):</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">eas build <span class=\"token parameter variable\">--profile</span> development <span class=\"token parameter variable\">--platform</span> ios</code></pre></div>\n<p>The same to build and install app on your local machine:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">APP_VARIANT</span><span class=\"token operator\">=</span>development <span class=\"token function\">yarn</span> expo run:ios <span class=\"token parameter variable\">-d</span></code></pre></div>\n<blockquote>\n<p>In both cases you may need to register your devices with your account first using <code class=\"language-text\">eas device:create</code>, see the documentation for the details.</p>\n</blockquote>\n<p>Now to develop the app that is already installed on your device, just do:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> expo start --dev-client <span class=\"token punctuation\">[</span>--clear<span class=\"token punctuation\">]</span></code></pre></div>\n<blockquote>\n<p>If you used the app before, and now your rendezvous server is available on a different url, make sure that you re-scan the QR-code published by the rendezvous server. This is especially important to do <strong>before</strong> you do a <em>factory reset</em> in the Identity App.</p>\n</blockquote>\n<h2 id=\"yarn-expo-and-eas\" style=\"position:relative;\"><a href=\"#yarn-expo-and-eas\" aria-label=\"yarn expo and eas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>yarn expo and eas</h2>\n<p>In above commands, you may have noticed that we invoke <code class=\"language-text\">expo</code> via <code class=\"language-text\">yarn</code> (<code class=\"language-text\">yarn expo</code>), but we call <code class=\"language-text\">eas</code> directly. This is well described in <a href=\"https://blog.expo.dev/expo-sdk-46-c2a1655f63f7\">Expo SDK 46 blog post</a> in Section <em>Expo CLI</em>. For a brief summary: we install eas globally, while we use local installation when calling <code class=\"language-text\">expo</code>. To explicitly invoke the legacy globally installed CLI: use <code class=\"language-text\">expo-cli</code> instead of <code class=\"language-text\">expo</code>. Global Expo CLI is still required for <code class=\"language-text\">expo upgrade</code> and <code class=\"language-text\">expo doctor</code>: these commands haven‚Äôt yet been migrated to standalone packages, they are up next. Invoke them with <code class=\"language-text\">expo-cli upgrade</code> and <code class=\"language-text\">expo-cli doctor</code>. See also <a href=\"https://docs.expo.dev/workflow/expo-cli/#expo-cli-migration\">Expo CLI Migration</a>.</p>\n<h2 id=\"internal-distribution\" style=\"position:relative;\"><a href=\"#internal-distribution\" aria-label=\"internal distribution permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Internal Distribution</h2>\n<p>Before submitting to the App Store (also TestFlight), you may also build a production version of your app without development extensions - this way you can test the app locally before going through the App Store publishing cycle:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># on the server</span>\neas build <span class=\"token parameter variable\">--profile</span> preview <span class=\"token parameter variable\">--platform</span> ios\n\n<span class=\"token comment\"># locally</span>\n<span class=\"token assign-left variable\">APP_VARIANT</span><span class=\"token operator\">=</span>preview <span class=\"token function\">yarn</span> expo run:ios <span class=\"token parameter variable\">--configuration</span> Release <span class=\"token parameter variable\">-d</span></code></pre></div>\n<p>The production build to my best knowledge can only be done on the server:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">eas build <span class=\"token parameter variable\">--profile</span> production <span class=\"token parameter variable\">--platform</span> ios</code></pre></div>\n<h2 id=\"cache\" style=\"position:relative;\"><a href=\"#cache\" aria-label=\"cache permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cache</h2>\n<p>Sometimes it is good to clear or invalidate the cache in the Eas build, especially when some hard to understand errors occur. There are two way to accomplish that. First, is to use <code class=\"language-text\">--clear-cache</code> option with <code class=\"language-text\">eas build</code>, e.g.:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">eas build <span class=\"token parameter variable\">--profile</span> development <span class=\"token parameter variable\">--platform</span> ios --clear-cache</code></pre></div>\n<p>There is also <a href=\"https://docs.expo.dev/build-reference/eas-json/#cache\">cache</a> setting in <code class=\"language-text\">eas.json</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"production\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"node\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"16.16.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"cache\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>To invalide cache, change the value of the <code class=\"language-text\">cache.key</code> attribute.</p>\n<h2 id=\"submitting-the-app\" style=\"position:relative;\"><a href=\"#submitting-the-app\" aria-label=\"submitting the app permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Submitting the app</h2>\n<p>Finally, the app submission with <code class=\"language-text\">eas submit</code> seems to be working just fine. If in trouble though, you can still just download the production build from EAS server and submit the app using <a href=\"https://apps.apple.com/us/app/transporter/id1450874784?mt=12\">Apple Transporter</a>.</p>\n<p>To submit the production build using EAS url:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">eas submit <span class=\"token parameter variable\">--url</span> <span class=\"token operator\">&lt;</span>url<span class=\"token operator\">></span></code></pre></div>\n<p>To submit a previously downloaded production build:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">eas submit <span class=\"token parameter variable\">--platform</span> ios</code></pre></div>\n<h2 id=\"expo-and-monorepos\" style=\"position:relative;\"><a href=\"#expo-and-monorepos\" aria-label=\"expo and monorepos permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Expo and monorepos</h2>\n<p>Monorepos can be a pain. This is what we recommend.</p>\n<p>Take a look at <a href=\"https://docs.expo.dev/guides/monorepos/\">Working with Monorepos</a>, but then you may like to follow our recommendations below.</p>\n<p>We used to use <a href=\"https://www.npmjs.com/package/expo-yarn-workspaces\">expo-yarn-workspaces</a>. It seems though that it does not add anything, except for making <code class=\"language-text\">expo-cli doctor</code> to fail with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">expo-cli doctor\nExpected package @expo/config-plugins@^5.0.0\nFound invalid:\n  @expo/config-plugins@4.1.5\n  @expo/config-plugins@4.1.5\n  <span class=\"token punctuation\">(</span>for <span class=\"token function\">more</span> info, run: <span class=\"token function\">npm</span> why @expo/config-plugins<span class=\"token punctuation\">)</span></code></pre></div>\n<p>The recommendations from the above mentioned <a href=\"https://docs.expo.dev/guides/monorepos/\">Working with Monorepos</a> are promising, but it did not work for us. We found that the only reliable way to get things working predictably was to stop hoisting dependencies from the <code class=\"language-text\">idapp</code> workspace by adding this to its <code class=\"language-text\">package.json</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"installConfig\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"hoistingLimits\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"workspaces\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Moreover, following the advice to create a custom <code class=\"language-text\">metro.config.js</code>, when running <code class=\"language-text\">yarn expo run:ios -d</code> we were getting a message:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Metro skipped: Project metro.config.js does not match prebuild template.\n‚Ä∫ Ensure the project uses @expo/metro-config.</code></pre></div>\n<p>Adding <code class=\"language-text\">@expo/metro-config</code> does not seem to do anything (expo seems to provide it already via <code class=\"language-text\">expo/metro-config</code>). We decided to delete the custom <code class=\"language-text\">metro.config.js</code> and let the default to be created by <code class=\"language-text\">yarn expo run:ios -d</code> (we also ignored it from the linting). With these settings in place, the project seems to be building fine.</p>\n<h2 id=\"installing-app-variants-on-the-same-device\" style=\"position:relative;\"><a href=\"#installing-app-variants-on-the-same-device\" aria-label=\"installing app variants on the same device permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installing app variants on the same device</h2>\n<p>We follow the advice from <a href=\"https://docs.expo.dev/build-reference/variants/\">Installing app variants on the same device</a>. In <code class=\"language-text\">app.config.js</code> we source the basic configuration from <code class=\"language-text\">app.json</code> and then we update it based on the EVN variable <code class=\"language-text\">APP_VARIANT</code>, which can either be set manually in the shell when building locally or in <code class=\"language-text\">eas.json</code> when using <code class=\"language-text\">eas build</code>. See also <a href=\"https://docs.expo.dev/workflow/configuration/\">Configuration with app.json/app.config.js</a>.</p>\n<p>To summarize, in order to build a development build version of the app locally, we use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># for development build</span>\n<span class=\"token assign-left variable\">APP_VARIANT</span><span class=\"token operator\">=</span>development <span class=\"token function\">yarn</span> expo run:ios <span class=\"token parameter variable\">-d</span>\n\n<span class=\"token comment\"># for preview build</span>\n<span class=\"token assign-left variable\">APP_VARIANT</span><span class=\"token operator\">=</span>preview <span class=\"token function\">yarn</span> expo run:ios <span class=\"token parameter variable\">--configuration</span> Release <span class=\"token parameter variable\">-d</span></code></pre></div>\n<blockquote>\n<p>We still use <code class=\"language-text\">config.json</code> to change the app configuration and then we apply it to <code class=\"language-text\">app.json</code> by running <code class=\"language-text\">yarn env:prod</code>. Now this seems to be a bit redundant but may come handy again when we need to keep separate configs for production and development/testing. The <a href=\"\">expo-env</a> package seems a bit outdated, perhaps we should check <a href=\"https://docs.expo.dev/guides/environment-variables/\">Environment variables in Expo</a> and <a href=\"https://docs.expo.dev/build-reference/variables/\">Environment variables and secrets</a>.</p>\n</blockquote>\n<h2 id=\"troubleshooting\" style=\"position:relative;\"><a href=\"#troubleshooting\" aria-label=\"troubleshooting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Troubleshooting</h2>\n<p>In our overall experience we observed the following:</p>\n<ol>\n<li>When building on local computer using <code class=\"language-text\">yarn expo run:ios -d</code>: if the build fails, try the following:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> ~/Library/Developer/Xcode/DerivedData/*\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> **/node_modules\n<span class=\"token function\">yarn</span> <span class=\"token function\">install</span>\n<span class=\"token function\">yarn</span> build</code></pre></div>\n<ol start=\"2\">\n<li>We recommend installing <code class=\"language-text\">expo-cli</code> and <code class=\"language-text\">eas-cli</code> globally (e.g. <code class=\"language-text\">yarn global add expo-cli eas-cli</code>), even though <code class=\"language-text\">expo</code> is now available through local expo dependencies and can be called as <code class=\"language-text\">yarn expo</code>.</li>\n<li>When building on the server, pay attention to <code class=\"language-text\">.gitignore</code>. <code class=\"language-text\">eas  build</code> will only upload to eas server what is not ignored.</li>\n<li><code class=\"language-text\">eas build</code> operates on your repo in the same way you do locally. Before the expo app can be built, local dependencies need to be built. This is why we have <code class=\"language-text\">posinstall</code> scrip in the top-level <code class=\"language-text\">package.json</code>.</li>\n<li>Before using <code class=\"language-text\">eas build</code>, we recommend to delete the <code class=\"language-text\">ios</code> folder if it exists (it is the result of doing <code class=\"language-text\">yarn expo run:ios -d</code>).</li>\n</ol>\n<h2 id=\"legacy-instruction-for-the-reference\" style=\"position:relative;\"><a href=\"#legacy-instruction-for-the-reference\" aria-label=\"legacy instruction for the reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Legacy instruction for the reference</h2>\n<p>For the reference, we still keep the original build steps below.</p>\n<h3 id=\"usage\" style=\"position:relative;\"><a href=\"#usage\" aria-label=\"usage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usage</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> start <span class=\"token punctuation\">[</span>--clear<span class=\"token punctuation\">]</span></code></pre></div>\n<blockquote>\n<p>If you used the app before, and now your rendezvous server is available on a different url, make sure that you re-scan the QR-code published by the rendezvous server. This is especially important to do <strong>before</strong> you do a <em>factory reset</em> in the Identity App.</p>\n</blockquote>\n<h3 id=\"update-buildversion-number-for-the-app-1\" style=\"position:relative;\"><a href=\"#update-buildversion-number-for-the-app-1\" aria-label=\"update buildversion number for the app 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Update build/version number for the app</h3>\n<p>In <code class=\"language-text\">config.json</code> we have two attributes related to versioning of the app: <code class=\"language-text\">version</code> and <code class=\"language-text\">ios.buildNumber</code>. Before publishing the app to TestFlight one of the two needs to be updated. Currently we keep <code class=\"language-text\">version</code> fixed to <code class=\"language-text\">1.0.0</code>, and for each new build we just increase the build number.</p>\n<blockquote>\n<p>Here we are concerned with the iOS build, but notice that there is also attribute <code class=\"language-text\">android.versionCode</code> which plays the same role as <code class=\"language-text\">ios.buildNumber</code>. When increasing <code class=\"language-text\">ios.buildNumber</code> we also increase <code class=\"language-text\">android.versionCode</code>.</p>\n</blockquote>\n<h3 id=\"apply-the-build-configuration-1\" style=\"position:relative;\"><a href=\"#apply-the-build-configuration-1\" aria-label=\"apply the build configuration 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Apply the build configuration</h3>\n<p>Run <code class=\"language-text\">yarn env:prod</code> from the terminal.</p>\n<blockquote>\n<p>All commands need to be run from the <code class=\"language-text\">workspaces/idapp</code> folder.</p>\n</blockquote>\n<blockquote>\n<p>Remember to issue <code class=\"language-text\">yarn build</code> at the root of the repo to build all dependencies. In the future we will move the whole build to the CI, but for know this has to be locally on your machine. This is not really needed you build on EAS server, as we make sure that local packages are build automatically there (see <code class=\"language-text\">postinstall</code> script in the root <code class=\"language-text\">package.json</code>).</p>\n</blockquote>\n<h3 id=\"create-ios-build\" style=\"position:relative;\"><a href=\"#create-ios-build\" aria-label=\"create ios build permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create iOS build</h3>\n<p>Run <code class=\"language-text\">expo build:ios</code> from the terminal. Once the build is finished download the corresponding <code class=\"language-text\">.ipa</code> file.</p>\n<h3 id=\"upload-the-build-to-apple-connect\" style=\"position:relative;\"><a href=\"#upload-the-build-to-apple-connect\" aria-label=\"upload the build to apple connect permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Upload the build to Apple Connect</h3>\n<p>Once the app is built, download the <code class=\"language-text\">ipa</code> file and use <a href=\"https://apps.apple.com/us/app/transporter/id1450874784?mt=12\">Apple Transporter</a> to upload the file to the Apple Connect account.</p>\n<h3 id=\"previous-not-recommended-method\" style=\"position:relative;\"><a href=\"#previous-not-recommended-method\" aria-label=\"previous not recommended method permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Previous (not recommended) method</h3>\n<p>In the past we had to use <code class=\"language-text\">xcrun</code> tool to upload the app to Apple Connect:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">xcrun altool --upload-app <span class=\"token parameter variable\">-f</span> <span class=\"token operator\">&lt;</span><span class=\"token environment constant\">PATH</span>-TO-IPA-FILE<span class=\"token operator\">></span> <span class=\"token parameter variable\">-u</span> <span class=\"token operator\">&lt;</span>YOUR APPLE-ID<span class=\"token operator\">></span></code></pre></div>\n<p>You will be asked for the password.</p>\n<blockquote>\n<p>Here I assume you have your Apple Connect configured. In particular you might have to generate an App Specific password for your account. If you need some guidance on the whole process you may like to consult <a href=\"https://levelup.gitconnected.com/react-native-how-to-publish-an-expo-app-to-testflight-debug-common-errors-90e427b4b5ea\">React Native: How To Publish An Expo App To TestFlight + Debug Common Errors</a> and the official Expo documentation <a href=\"https://docs.expo.io/versions/v35.0.0/distribution/uploading-apps/\">Uploading Apps to the Apple App Store and Google Play</a>.</p>\n</blockquote>\n<blockquote>\n<p>If you have 2FA enabled for your AppleId, you will need to create an App-specific password and provide it here.</p>\n</blockquote>\n<p>It may take some time before the uploading of the app finishes. There will be no feedback or progress indication in the meantime. If everything worked out, you will just see <code class=\"language-text\">No errors uploading 'YOUR IPA FILE NAME'</code>. In case it did not work, you will get some information about the error, in which case <a href=\"https://github.com/expo/expo-cli/issues/927\">this thread</a> may help.</p>\n<h3 id=\"make-your-build-ready-on-the-apple-connect-portal\" style=\"position:relative;\"><a href=\"#make-your-build-ready-on-the-apple-connect-portal\" aria-label=\"make your build ready on the apple connect portal permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Make your build ready on the Apple Connect portal</h3>\n<p>You may need to wait a bit before the processing of your build finishes on iTunes. You will get an email from iTunes Store saying that your new build has completed processing (and you will most probably ignore an email about ITMS-90809: Deprecated API Usage for UIWebView - we hope this will be fixed by Expo team soon).</p>\n<p>You will also like to include additional information about your build so that your testers know what's new in this build that needs to be tested.</p>\n<blockquote>\n<p>We noticed that entering this description on Safari makes the portal unresponsive - Google Chrome worked just fine...</p>\n</blockquote>","headings":[{"value":"App configuration"},{"value":"Preparing for distribution"},{"value":"Expo EAS"},{"value":"How to create a development build"},{"value":"yarn expo and eas"},{"value":"Internal Distribution"},{"value":"Cache"},{"value":"Submitting the app"},{"value":"Expo and monorepos"},{"value":"Installing app variants on the same device"},{"value":"Troubleshooting"},{"value":"Legacy instruction for the reference"}]}}},"headings":[]}},{"node":{"frontmatter":{"title":"idbox-react-ui","path":"/components/idbox-react-ui","tag":"component","sortIndex":10,"content":{"childMarkdownRemark":{"html":"<h1 id=\"identity-boxidbox-react-ui\" style=\"position:relative;\"><a href=\"#identity-boxidbox-react-ui\" aria-label=\"identity boxidbox react ui permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>@identity-box/idbox-react-ui</h1>\n<p><code class=\"language-text\">@identity-box/idbox-react-ui</code> provides ui components that make building React client apps\na bit easier.</p>","headings":[]}}},"headings":[]}},{"node":{"frontmatter":{"title":"Identity Service","path":"/services/identity-service","tag":"service","sortIndex":30,"content":{"childMarkdownRemark":{"html":"<h1 id=\"identity-service\" style=\"position:relative;\"><a href=\"#identity-service\" aria-label=\"identity service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Identity Service</h1>\n<p>A service to handle identity related operations.</p>\n<blockquote>\n<p>Since version <code class=\"language-text\">0.1.38</code> all Identity Box services are ESM-only. No building is required.</p>\n</blockquote>\n<h2 id=\"installation\" style=\"position:relative;\"><a href=\"#installation\" aria-label=\"installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation</h2>\n<p>On your identity-box, first create a folder where you want your service to be installed (we recommend that you use the name of the service as the name of the folder). Then install the service as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ npx github:/identity-box/cli install-service identity-service</code></pre></div>\n<h2 id=\"ipfs\" style=\"position:relative;\"><a href=\"#ipfs\" aria-label=\"ipfs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IPFS</h2>\n<p>Make sure the IPFS daemon is running:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ipfs daemon --enable-namesys-pubsub --enable-pubsub-experiment --enable-gc <span class=\"token parameter variable\">--migrate</span></code></pre></div>\n<h2 id=\"required-environment-variables\" style=\"position:relative;\"><a href=\"#required-environment-variables\" aria-label=\"required environment variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Required environment variables</h2>\n<p>Identity Service assume some environment variables to be set.</p>\n<h3 id=\"ipfs-environment-variables\" style=\"position:relative;\"><a href=\"#ipfs-environment-variables\" aria-label=\"ipfs environment variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IPFS environment variables</h3>\n<p>Identity Service assume some environment variables to be set.</p>\n<p><code class=\"language-text\">IPFS_PATH</code> needs to point to the IPFS data directory. On the local machine this is usually <code class=\"language-text\">$HOME/.ipfs</code>.</p>\n<p><code class=\"language-text\">IPFS_ADDR</code> contains the address of the IPFS host. This needs to conform to the\n<a href=\"https://multiformats.io/multiaddr/\">multiaddr</a> format. When this environment\nvariable is not set, the address will default to <code class=\"language-text\">/ip4/127.0.0.1/tcp/5001</code>.</p>\n<h3 id=\"automatic-backups\" style=\"position:relative;\"><a href=\"#automatic-backups\" aria-label=\"automatic backups permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Automatic backups</h3>\n<p>For the automatic backups functionality, Identity Service requires two environment variables to be set: <code class=\"language-text\">IDBOX_BACKUP</code> holding the absolute path\nto the backup directory, and <code class=\"language-text\">IDBOX_BACKUP_PASSWORD</code> to hold the password to encrypt the idbox IPNS keys. Every key from <code class=\"language-text\">$IPFS_PATH/keystore</code> will\nhave its corresponding <code class=\"language-text\">pem</code> file in <code class=\"language-text\">$IDBOX_BACKUP</code> directory. <code class=\"language-text\">$IDBOX_BACKUP</code> will also contain a <code class=\"language-text\">backup</code> file with all user's identities from the IdApp (encrypted).</p>\n<h2 id=\"usage\" style=\"position:relative;\"><a href=\"#usage\" aria-label=\"usage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usage</h2>\n<p>To directly run the service, use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> identity-service start</code></pre></div>\n<h2 id=\"with-pm2\" style=\"position:relative;\"><a href=\"#with-pm2\" aria-label=\"with pm2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>With PM2</h2>\n<p>You can take of advantage of pm2 to start an identity-box service. Make sure you have pm2 installed globally:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> pm2 <span class=\"token parameter variable\">-g</span></code></pre></div>\n<h3 id=\"start-service\" style=\"position:relative;\"><a href=\"#start-service\" aria-label=\"start service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start service</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 start ecosystem.config.cjs</code></pre></div>\n<h3 id=\"list-all-services\" style=\"position:relative;\"><a href=\"#list-all-services\" aria-label=\"list all services permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>List all services</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 list</code></pre></div>\n<h3 id=\"settings-on-a-service\" style=\"position:relative;\"><a href=\"#settings-on-a-service\" aria-label=\"settings on a service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Settings on a service</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 show identity-service</code></pre></div>\n<h3 id=\"logs\" style=\"position:relative;\"><a href=\"#logs\" aria-label=\"logs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Logs</h3>\n<p>To show both stdout and stderr logs run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 logs identity-service</code></pre></div>\n<p>This shows all the logs of identity-service and outputs the last 15 lines (the default).</p>\n<p>To see only standard output logs, and print more lines from the output use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 logs identity-service <span class=\"token parameter variable\">--out</span> <span class=\"token parameter variable\">--lines</span> <span class=\"token number\">150</span></code></pre></div>\n<h3 id=\"restart-process-after-editing-ecosystem\" style=\"position:relative;\"><a href=\"#restart-process-after-editing-ecosystem\" aria-label=\"restart process after editing ecosystem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Restart process after editing ecosystem</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 delete ecosystem.config.cjs\n$ pm2 start ecosystem.config.cjs</code></pre></div>","headings":[{"value":"Installation"},{"value":"IPFS"},{"value":"Required environment variables"},{"value":"Usage"},{"value":"With PM2"}]}}},"headings":[]}},{"node":{"frontmatter":{"title":"Name Service","path":"/services/nameservice","tag":"service","sortIndex":40,"content":{"childMarkdownRemark":{"html":"<h1 id=\"name-service\" style=\"position:relative;\"><a href=\"#name-service\" aria-label=\"name service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Name Service</h1>\n<p>A service to handle name resolution requests in a fully distributed way.</p>\n<blockquote>\n<p>Since version <code class=\"language-text\">0.1.38</code> all Identity Box services are ESM-only. No building is required.</p>\n</blockquote>\n<h2 id=\"installation\" style=\"position:relative;\"><a href=\"#installation\" aria-label=\"installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation</h2>\n<p>On your identity-box, first create a folder where you want your service to be installed (we recommend that you use the name of the service as the name of the folder). Then install the service as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ npx github:/identity-box/cli install-service nameservice</code></pre></div>\n<h2 id=\"ipfs\" style=\"position:relative;\"><a href=\"#ipfs\" aria-label=\"ipfs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IPFS</h2>\n<p>Make sure the IPFS daemon is running:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ipfs daemon --enable-namesys-pubsub --enable-pubsub-experiment --enable-gc <span class=\"token parameter variable\">--migrate</span></code></pre></div>\n<h2 id=\"required-environment-variables\" style=\"position:relative;\"><a href=\"#required-environment-variables\" aria-label=\"required environment variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Required environment variables</h2>\n<p>Name Service assume some environment variables to be set.</p>\n<h3 id=\"ipfs_addr\" style=\"position:relative;\"><a href=\"#ipfs_addr\" aria-label=\"ipfs_addr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IPFS_ADDR</h3>\n<p><code class=\"language-text\">IPFS_ADDR</code> contains the address of the IPFS host. This needs to conform to the\n<a href=\"https://multiformats.io/multiaddr/\">multiaddr</a> format. When this environment\nvariable is not set, the address will default to <code class=\"language-text\">/ip4/127.0.0.1/tcp/5001</code>.</p>\n<h2 id=\"usage\" style=\"position:relative;\"><a href=\"#usage\" aria-label=\"usage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usage</h2>\n<p>To directly run the service, use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> nameservice start</code></pre></div>\n<p>All currently published identities are listed in the <code class=\"language-text\">Identities.json</code> file. This allows the Name Service to\nautomatically restart publishing after the service has been restarted.</p>\n<h2 id=\"with-pm2\" style=\"position:relative;\"><a href=\"#with-pm2\" aria-label=\"with pm2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>With PM2</h2>\n<p>You can take of advantage of pm2 to start an identity-box service. Make sure you have pm2 installed globally:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> pm2 <span class=\"token parameter variable\">-g</span></code></pre></div>\n<h3 id=\"start-service\" style=\"position:relative;\"><a href=\"#start-service\" aria-label=\"start service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start service</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 start ecosystem.config.cjs</code></pre></div>\n<h3 id=\"list-all-services\" style=\"position:relative;\"><a href=\"#list-all-services\" aria-label=\"list all services permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>List all services</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 list</code></pre></div>\n<h3 id=\"settings-on-a-service\" style=\"position:relative;\"><a href=\"#settings-on-a-service\" aria-label=\"settings on a service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Settings on a service</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 show nameservice</code></pre></div>\n<h3 id=\"logs\" style=\"position:relative;\"><a href=\"#logs\" aria-label=\"logs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Logs</h3>\n<p>To show both stdout and stderr logs run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 logs nameservice</code></pre></div>\n<p>This shows all the logs of nameservice and outputs the last 15 lines (the default).</p>\n<p>To see only standard output logs, and print more lines from the output use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 logs nameservice <span class=\"token parameter variable\">--out</span> <span class=\"token parameter variable\">--lines</span> <span class=\"token number\">150</span></code></pre></div>\n<h3 id=\"restart-process-after-editing-ecosystem\" style=\"position:relative;\"><a href=\"#restart-process-after-editing-ecosystem\" aria-label=\"restart process after editing ecosystem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Restart process after editing ecosystem</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 delete ecosystem.config.cjs\n$ pm2 start ecosystem.config.cjs</code></pre></div>","headings":[{"value":"Installation"},{"value":"IPFS"},{"value":"Required environment variables"},{"value":"Usage"},{"value":"With PM2"}]}}},"headings":[]}},{"node":{"frontmatter":{"title":"Rendezvous Client","path":"/components/rendezvous-client","tag":"component","sortIndex":20,"content":{"childMarkdownRemark":{"html":"<h1 id=\"rendezvous-client\" style=\"position:relative;\"><a href=\"#rendezvous-client\" aria-label=\"rendezvous client permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rendezvous Client</h1>\n<p>Rendezvous Client package provides two abstractions: <code class=\"language-text\">RendezvousClient</code> and <code class=\"language-text\">RendezvousTunnel</code>.</p>\n<h2 id=\"rendezvousclient\" style=\"position:relative;\"><a href=\"#rendezvousclient\" aria-label=\"rendezvousclient permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RendezvousClient</h2>\n<p><code class=\"language-text\">RendezvousClient</code> facilitates secure connection between a browser (or mobile if javascript code is run, e.g. with React Native) and the <a href=\"https://idbox.online/services/rendezvous\">Rendezvous</a> service.</p>\n<h2 id=\"rendezvoustunnel\" style=\"position:relative;\"><a href=\"#rendezvoustunnel\" aria-label=\"rendezvoustunnel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RendezvousTunnel</h2>\n<p><code class=\"language-text\">RendezvousTunnel</code> creates a secure connection between two clients (e.g. browser to browser or browser to mobile if e.g. React Native is used) using a <a href=\"https://idbox.online/services/rendezvous\">Rendezvous</a> service on an Identity Box with the given url.</p>","headings":[{"value":"RendezvousClient"},{"value":"RendezvousTunnel"}]}}},"headings":[]}},{"node":{"frontmatter":{"title":"Rendezvous service","path":"/services/rendezvous","tag":"service","sortIndex":50,"content":{"childMarkdownRemark":{"html":"<h1 id=\"rendezvous-service\" style=\"position:relative;\"><a href=\"#rendezvous-service\" aria-label=\"rendezvous service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rendezvous Service</h1>\n<p>A service to provide external connectivity to the box from the browsers and mobile devices.</p>\n<blockquote>\n<p>Since version <code class=\"language-text\">0.1.38</code> all Identity Box services are ESM-only. No building is required.</p>\n</blockquote>\n<h2 id=\"installation\" style=\"position:relative;\"><a href=\"#installation\" aria-label=\"installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation</h2>\n<p>On your identity-box, first create a folder where you want your service to be installed (we recommend that you use the name of the service as the name of the folder). Then install the service as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ npx github:/identity-box/cli install-service rendezvous</code></pre></div>\n<h2 id=\"usage\" style=\"position:relative;\"><a href=\"#usage\" aria-label=\"usage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usage</h2>\n<p>To directly run the service, use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./node_modules/.bin/rendezvous start</code></pre></div>\n<h2 id=\"with-pm2\" style=\"position:relative;\"><a href=\"#with-pm2\" aria-label=\"with pm2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>With PM2</h2>\n<p>You can take of advantage of pm2 to start an identity-box service. Make sure you have pm2 installed globally:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> pm2 <span class=\"token parameter variable\">-g</span></code></pre></div>\n<h3 id=\"start-service\" style=\"position:relative;\"><a href=\"#start-service\" aria-label=\"start service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start service</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 start ecosystem.config.cjs</code></pre></div>\n<h3 id=\"list-all-services\" style=\"position:relative;\"><a href=\"#list-all-services\" aria-label=\"list all services permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>List all services</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 list</code></pre></div>\n<h3 id=\"settings-on-a-service\" style=\"position:relative;\"><a href=\"#settings-on-a-service\" aria-label=\"settings on a service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Settings on a service</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 show rendezvous</code></pre></div>\n<h3 id=\"logs\" style=\"position:relative;\"><a href=\"#logs\" aria-label=\"logs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Logs</h3>\n<p>To show both stdout and stderr logs run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 logs rendezvous</code></pre></div>\n<p>This shows all the logs of identity-service and outputs the last 15 lines (the default).</p>\n<p>To see only standard output logs, and print more lines from the output use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 logs rendezvous <span class=\"token parameter variable\">--out</span> <span class=\"token parameter variable\">--lines</span> <span class=\"token number\">150</span></code></pre></div>\n<h3 id=\"restart-process-after-editing-ecosystem\" style=\"position:relative;\"><a href=\"#restart-process-after-editing-ecosystem\" aria-label=\"restart process after editing ecosystem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Restart process after editing ecosystem</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pm2 delete ecosystem.config.cjs\n$ pm2 start ecosystem.config.cjs</code></pre></div>","headings":[{"value":"Installation"},{"value":"Usage"},{"value":"With PM2"}]}}},"headings":[]}},{"node":{"frontmatter":{"title":"Utils","path":"/utils","tag":"utils","sortIndex":10,"content":{"childMarkdownRemark":{"html":"<h1 id=\"utils\" style=\"position:relative;\"><a href=\"#utils\" aria-label=\"utils permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Utils</h1>\n<p>Common utils for building Identity Box services.</p>","headings":[]}}},"headings":[]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[{"value":"v0.1.40 (2023-08-17)"},{"value":"v0.1.39 (2022-08-23)"},{"value":"v0.1.38 (2022-08-22)"},{"value":"v0.1.36 (2022-07-30)"},{"value":"v0.1.35 (2022-01-18)"},{"value":"v0.1.34 (2022-01-17)"},{"value":"v0.1.33 (2022-01-14)"},{"value":"v0.1.32 (2021-08-28)"},{"value":"v0.1.31 (2020-11-17)"},{"value":"v0.1.30 (2020-11-16)"},{"value":"v0.1.29 (2020-11-15)"},{"value":"v0.1.29-alpha.3 (2020-06-04)"},{"value":"v0.1.29-alpha.2 (2020-04-03)"},{"value":"v0.1.29-alpha.1 (2020-04-02)"},{"value":"v0.1.29-alpha.0 (2020-03-31)"},{"value":"v0.1.28 (2020-03-11)"},{"value":"v0.1.27 (2020-03-10)"}]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[{"value":"Quick start"},{"value":"Code organization"},{"value":"Building packages"},{"value":"Using now dev"},{"value":"Babel 7"},{"value":"Staying in sync with upstream"},{"value":"Submitting a Pull Request"},{"value":"Creating releases"},{"value":"Manual Let's Encrypt certificates"}]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[{"value":"Installation"},{"value":"Usage"},{"value":"With PM2"}]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[{"value":"App configuration"},{"value":"Preparing for distribution"},{"value":"Expo EAS"},{"value":"How to create a development build"},{"value":"yarn expo and eas"},{"value":"Internal Distribution"},{"value":"Cache"},{"value":"Submitting the app"},{"value":"Expo and monorepos"},{"value":"Installing app variants on the same device"},{"value":"Troubleshooting"},{"value":"Legacy instruction for the reference"}]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[{"value":"Installation"},{"value":"IPFS"},{"value":"Required environment variables"},{"value":"Usage"},{"value":"With PM2"}]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[{"value":"Installation"},{"value":"IPFS"},{"value":"Required environment variables"},{"value":"Usage"},{"value":"With PM2"}]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[{"value":"Installation"},{"value":"Usage"},{"value":"With PM2"}]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[{"value":"RendezvousClient"},{"value":"RendezvousTunnel"}]}},{"node":{"frontmatter":{"title":"","path":null,"tag":null,"sortIndex":null,"content":null},"headings":[]}},{"node":{"frontmatter":{"title":"Experience Identity Box","path":"/experience-identity-box","tag":"beta","sortIndex":10,"content":null},"headings":[]}},{"node":{"frontmatter":{"title":"Running Identity Box Locally","path":"/developers/running-identity-box-locally","tag":"developer","sortIndex":20,"content":null},"headings":[{"value":"Prerequisites"},{"value":"IPFS node"},{"value":"Identity Box"},{"value":"Hush-Hush"},{"value":"Identity App"},{"value":"Appendix - IPNS with Firebase"}]}},{"node":{"frontmatter":{"title":"Identity Box on Raspberry Pi","path":"/developers/idbox-raspberry-pi","tag":"developer","sortIndex":30,"content":null},"headings":[{"value":"Install Node.js and yarn"},{"value":"Install IPFS"},{"value":"PM2"},{"value":"Box Office"},{"value":"Name service"},{"value":"Identity Service"},{"value":"Rendezvous"},{"value":"Running services as a daemon"},{"value":"Upgrading Identity Box Services"},{"value":"Appendix - IPNS with Firebase"}]}},{"node":{"frontmatter":{"title":"Welcome to Identity Box","path":"/identity-box","tag":"user","sortIndex":10,"content":null},"headings":[{"value":"Decentralized Web"},{"value":"Decentralized Data"},{"value":"Digital Identity for Decentralized Web"},{"value":"DIDs for IPFS"},{"value":"Introducing Identity Box"},{"value":"Some technology aspects"}]}},{"node":{"frontmatter":{"title":"Automatic Backups","path":"/backups","tag":"beta","sortIndex":20,"content":null},"headings":[{"value":"What needs to be preserved?"},{"value":"Automatic backups step-by-step"}]}}]},"mdxNavigation":{"docs":[]}}}