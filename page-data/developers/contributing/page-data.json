{"componentChunkName":"component---node-modules-confluenza-gatsby-theme-confluenza-src-templates-markdown-template-js","path":"/developers/contributing/","result":{"data":{"site":{"siteMetadata":{"title":"Identity Box","editBaseUrl":"https://github.com/identity-box/identity-box/blob/master"}},"config":{"nodes":[{"tag":"user","title":"Identity Box"},{"tag":"developer","title":"Developers"},{"tag":"beta","title":"Early Adopters"},{"tag":"component","title":"Components"},{"tag":"service","title":"Services"},{"tag":"utils","title":"Utils"}]},"doc":{"html":"","fileAbsolutePath":"/home/runner/work/identity-box/identity-box/workspaces/homepage/src/pages/developers/contributing.md","frontmatter":{"title":"Contributing","content":{"childMarkdownRemark":{"html":"<h1 id=\"contributing\" style=\"position:relative;\"><a href=\"#contributing\" aria-label=\"contributing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contributing</h1>\n<blockquote>\n<p>Working on your first Pull Request? You can learn how from this <em>free</em> series\n<a href=\"https://egghead.io/series/how-to-contribute-to-an-open-source-project-on-github\">How to Contribute to an Open Source Project on\nGitHub</a></p>\n</blockquote>\n<h2 id=\"quick-start\" style=\"position:relative;\"><a href=\"#quick-start\" aria-label=\"quick start permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Quick start</h2>\n<p>After you clone your forked repo, follow the following steps to bootstrap your\nlocal environment:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">¬ª <span class=\"token function\">yarn</span> <span class=\"token function\">install</span>\n¬ª <span class=\"token function\">yarn</span> setup:dev\n¬ª <span class=\"token function\">yarn</span> <span class=\"token builtin class-name\">test</span>\n¬ª <span class=\"token punctuation\">(</span>cd workspaces/homepage <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">yarn</span> develop<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># or to get everything like in production</span>\n¬ª now dev</code></pre></div>\n<h2 id=\"code-organization\" style=\"position:relative;\"><a href=\"#code-organization\" aria-label=\"code organization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code organization</h2>\n<p>Identity Box is a monorepo. It consists of a number of packages that all live under the <code class=\"language-text\">workspaces</code> folder. We use a combination of <a href=\"https://lernajs.io\">lerna</a> and <a href=\"https://yarnpkg.com/lang/en/docs/workspaces/\">yarn\nworkspaces</a> to manage them.</p>\n<h3 id=\"yarn-install\" style=\"position:relative;\"><a href=\"#yarn-install\" aria-label=\"yarn install permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>yarn install</h3>\n<p>We install all mono-repo dependencies with single top-level <code class=\"language-text\">yarn install</code> or just <code class=\"language-text\">yarn</code>.</p>\n<h2 id=\"building-packages\" style=\"position:relative;\"><a href=\"#building-packages\" aria-label=\"building packages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building packages</h2>\n<p>Because our monorepo contains a number of <em>packages</em> under the <code class=\"language-text\">workspaces</code> directory, some of them may need to be build before they can be published.\nThe build command uses <code class=\"language-text\">lerna</code> in order to trigger the build script\nfor every single workspace. Please use a convenience script <code class=\"language-text\">build</code> defined in the root <code class=\"language-text\">package.json</code>.</p>\n<h3 id=\"run-tests\" style=\"position:relative;\"><a href=\"#run-tests\" aria-label=\"run tests permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run tests</h3>\n<p>We run all the tests from the top level - this is far more efficient\nespecially if the number of workspaces in the monorepo increases:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">¬ª <span class=\"token function\">yarn</span> <span class=\"token builtin class-name\">test</span>\n¬ª <span class=\"token function\">yarn</span> <span class=\"token builtin class-name\">test</span> --no-cache    // good to know this\n¬ª <span class=\"token function\">yarn</span> jest <span class=\"token parameter variable\">--clearCache</span>  // a <span class=\"token function\">nice</span> one</code></pre></div>\n<h3 id=\"confluenza-based-homepage\" style=\"position:relative;\"><a href=\"#confluenza-based-homepage\" aria-label=\"confluenza based homepage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Confluenza-based homepage</h3>\n<p>This is our landing page. It uses <a href=\"https://confluenza.online\">Confluenza</a>, which is based on <a href=\"https://www.gatsbyjs.org/\">Gatsby</a>.</p>\n<p>To start development server or to build version that is ready for distribution you can run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">¬ª <span class=\"token builtin class-name\">cd</span> workspaces/homepage\n¬ª <span class=\"token function\">yarn</span> develop\n¬ª <span class=\"token function\">yarn</span> build</code></pre></div>\n<h2 id=\"using-now-dev\" style=\"position:relative;\"><a href=\"#using-now-dev\" aria-label=\"using now dev permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using now dev</h2>\n<p>Take advantage of <code class=\"language-text\">now dev</code> to run a development server and have a mirror of your production hot-reloading. Read more at <a href=\"https://zeit.co/blog/now-dev\">Introducing <code class=\"language-text\">now dev</code> ‚Äì Serverless, on localhost</a>.</p>\n<h2 id=\"babel-7\" style=\"position:relative;\"><a href=\"#babel-7\" aria-label=\"babel 7 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Babel 7</h2>\n<p>We use Babel 7.</p>\n<p>Babel 7 has changed in how babel configuration is discovered.</p>\n<p>It allows three different configuration files: <code class=\"language-text\">babel.config.js</code>,\n<code class=\"language-text\">.babelrc.js</code>, and the familiar <code class=\"language-text\">.babelrc</code>. The semantics of file\ndiscovery have changed. If <code class=\"language-text\">babel.config.js</code> is present at your\ncurrent working directory, only this file will be used and <code class=\"language-text\">.babelrc</code>\nand <code class=\"language-text\">.babelrc.js</code> will be ignored (and it does not matter if they are\nin your <code class=\"language-text\">cwd</code> or in one of the subfolders).</p>\n<p>If <code class=\"language-text\">babel.config.js</code> is not present, you can decide to either use\n<code class=\"language-text\">.babelrc</code> for static configuration or <code class=\"language-text\">.babelrc.js</code> if you prefer to\nprogrammatically create your configuration. If you use the <code class=\"language-text\">.babelrc</code> variant, please notice that Babel 7 will look for a <code class=\"language-text\">.babelrc</code> in the current directory. If Babel finds\nother <code class=\"language-text\">.babelrc</code> files while transpiling files in a subfolder, it will merge the configurations together.</p>\n<p>Because our packages share the same Babel configuration, we chose\nto create a single top-level <code class=\"language-text\">babel.config.js</code> where we can\nprogrammatically create the configuration based on the <code class=\"language-text\">BABEL_ENV</code> and\n<code class=\"language-text\">NODE_ENV</code> environment variables. The same configuration file is used\nto run jest tests.</p>\n<p>We could not avoid having babel configurations in subfolders because\nthe babel 7 does not continue searching above the first <code class=\"language-text\">package.json</code> that it finds, and we run the <code class=\"language-text\">yarn build</code> command for the packages via top-level <code class=\"language-text\">yarn lerna run build</code>, which means it will be executed from the package folder.</p>\n<p>Fortunately, we are able to reuse the top-level\n<code class=\"language-text\">babel.config.js</code> by having the package-specific <code class=\"language-text\">babel.config.js</code>\nwith just the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">extends</span><span class=\"token operator\">:</span> <span class=\"token string\">'../../babel.config.js'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Alternatively, you can also use <code class=\"language-text\">.babelrc.js</code> with the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> babelConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../../babel.config'</span><span class=\"token punctuation\">)</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> babelConfig</code></pre></div>\n<blockquote>\n<p>In this case, make sure that you do not use the <code class=\"language-text\">--no-babelrc</code></p>\n</blockquote>\n<p>option in any of the babel commands in the <code class=\"language-text\">tools/build.js</code> top-level\nscript.</p>\n<p>So to summarize, we have a top-level <code class=\"language-text\">babel.config.js</code> and then for each package that we intend to publish to npm registry or which needs a custom babel configuration we have a <code class=\"language-text\">babel.config.js</code> file in the corresponding workspace directory.</p>\n<blockquote>\n<p>Please notice that we run tests from the top-running of the tests is nicely handled by the top-level <code class=\"language-text\">babel.config.js</code>.</p>\n</blockquote>\n<h3 id=\"read-more-about-babel\" style=\"position:relative;\"><a href=\"#read-more-about-babel\" aria-label=\"read more about babel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Read more about babel</h3>\n<p>In order to get a better grip on Babel 7 and how does it handle configuration files in version 7,\nplease refer to the following documents:</p>\n<ol>\n<li><a href=\"https://babeljs.io/docs/en/configuration\">Configure Babel</a></li>\n<li><a href=\"https://babeljs.io/docs/en/config-files\">Config Files</a></li>\n</ol>\n<h2 id=\"staying-in-sync-with-upstream\" style=\"position:relative;\"><a href=\"#staying-in-sync-with-upstream\" aria-label=\"staying in sync with upstream permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Staying in sync with upstream</h2>\n<p>You can follow the steps described in <a href=\"https://help.github.com/articles/syncing-a-fork/\">Syncing a\nfork</a>. We recommend that you\nkeep your local master branch pointing to the upstream master branch. Remaining\nin sync then becomes really easy:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> upstream https://github.com/marcinczenko/identity-box.git\n<span class=\"token function\">git</span> fetch upstream\n<span class=\"token function\">git</span> branch --set-upstream-to<span class=\"token operator\">=</span>upstream/master master</code></pre></div>\n<p>Now, when you do <code class=\"language-text\">git pull</code> from your local <code class=\"language-text\">master</code> branch git will\nfetch changes from the <code class=\"language-text\">upstream</code> remote. Then you can make all of\nyour pull request branches based on this <code class=\"language-text\">master</code> branch.</p>\n<h2 id=\"submitting-a-pull-request\" style=\"position:relative;\"><a href=\"#submitting-a-pull-request\" aria-label=\"submitting a pull request permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Submitting a Pull Request</h2>\n<p>Please go through existing issues and pull requests to check if\nsomebody else is already working on it, we use <code class=\"language-text\">someone working on it</code>\nlabel to mark such issues.</p>\n<h2 id=\"creating-releases\" style=\"position:relative;\"><a href=\"#creating-releases\" aria-label=\"creating releases permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating releases</h2>\n<p>We define a release as a sequence of Pull Requests. When creating a pull request that\nshould be part of a next release, we add one of the following labels to it:</p>\n<ul>\n<li>PR: Breaking Change üí£,</li>\n<li>PR: New Feature üöÄ,</li>\n<li>PR: Enhancement üòª,</li>\n<li>PR: Bug Fix üêõ,</li>\n<li>PR: Documentation üìñ,</li>\n<li>PR: Refactoring üî®</li>\n</ul>\n<p>Some discipline is required to make sure that a pull request is focused on one of the above\nmentioned categories. One can say that our releases are pull-request-oriented rather than commit oriented.\nThis allows us to have enough information and structure while leaving a level of freedom. This is in contrast to so-called <em>conventional commits</em>, where each commit must adhere to a set of predefined formatting rules. We find this restriction an inconvenience.</p>\n<p>We use <a href=\"https://www.npmjs.com/package/lerna-changelog\">lerna-changelog</a> to have some level of automation, so that not everything needs to be done by hand. We describe the process of creating a release below.</p>\n<h3 id=\"publishing-packages\" style=\"position:relative;\"><a href=\"#publishing-packages\" aria-label=\"publishing packages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Publishing packages</h3>\n<p>Because we have consciously chosen to have one version for all our packages, it is important to run <code class=\"language-text\">lerna publish</code> with <code class=\"language-text\">--force-publish</code> option:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> lerna publish --force-publish</code></pre></div>\n<p>This will not only remove confusion among our users, but will also make releases easier to follow.</p>\n<h3 id=\"updating-changelogmd\" style=\"position:relative;\"><a href=\"#updating-changelogmd\" aria-label=\"updating changelogmd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Updating CHANGELOG.md</h3>\n<p>After packages are published and all relevant Pull Requests are merged to the master branch, we run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> lerna-changelog <span class=\"token parameter variable\">--from</span><span class=\"token operator\">=</span>vx.y.z <span class=\"token parameter variable\">--to</span><span class=\"token operator\">=</span>vX.Y.Z</code></pre></div>\n<p>where <code class=\"language-text\">vx.y.z</code> refers to the release tag preceding the most recent tag <code class=\"language-text\">vX.Y.Z</code>. Foe example, if last release was tagged <code class=\"language-text\">v1.0.18</code> and the tag for the candidate release already merged and pushed to master is <code class=\"language-text\">v1.0.19</code>, then the command would be:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> lerna-changelog <span class=\"token parameter variable\">--from</span><span class=\"token operator\">=</span>v1.0.18 <span class=\"token parameter variable\">--to</span><span class=\"token operator\">=</span>v1.0.19</code></pre></div>\n<p>The output of this command should be then manually prepended to <code class=\"language-text\">CHANGELOG.md</code> and pushed to the master branch.</p>\n<h3 id=\"draft-a-new-release\" style=\"position:relative;\"><a href=\"#draft-a-new-release\" aria-label=\"draft a new release permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Draft a new release</h3>\n<p>On github, use <em>Draft a new release</em> using the output of the <code class=\"language-text\">lerna-changelog</code> command as the input.\nAdjust the fields so that the new release follows the structure of previous releases (unless a new formatting is desired).</p>\n<h3 id=\"read-more-about-releasing-code\" style=\"position:relative;\"><a href=\"#read-more-about-releasing-code\" aria-label=\"read more about releasing code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Read more about releasing code</h3>\n<ul>\n<li><a href=\"https://github.com/lerna/lerna-changelog\">lerna-changelog</a></li>\n<li><a href=\"https://medium.com/angular-in-depth/release-management-in-angular-with-lerna-21b4ab417c59\">using conventional commits with lerna</a></li>\n<li><a href=\"https://semantic-release.gitbook.io/semantic-release/\">semantic-release</a></li>\n<li><a href=\"https://github.com/semantic-release/semantic-release/issues/193\">semantic-release and monorepos discussion</a></li>\n</ul>\n<h2 id=\"manual-lets-encrypt-certificates\" style=\"position:relative;\"><a href=\"#manual-lets-encrypt-certificates\" aria-label=\"manual lets encrypt certificates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Manual Let's Encrypt certificates</h2>\n<p>On Identity Box we run Nginx server and we use Let's Encrypt certificates. We generate (and renew) certificates manually using the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> certbot <span class=\"token comment\"># only first time</span>\n$ <span class=\"token function\">sudo</span> certbot certonly <span class=\"token parameter variable\">--server</span> https://acme-v02.api.letsencrypt.org/directory <span class=\"token parameter variable\">--manual</span> --preferred-challenges dns <span class=\"token parameter variable\">-d</span> *.idbox.online</code></pre></div>\n<p>You will be asked to add a <code class=\"language-text\">TXT</code> DNS record to your domain DNS configuration.</p>\n<p>It is a good idea to backup your certificates:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">tar</span> czvf letsencrypt-idbox.tar.gz /etc/letsencrypt</code></pre></div>\n<p>and store them safely on another machine.</p>","fileAbsolutePath":"/home/runner/work/identity-box/identity-box/CONTRIBUTING.md"}}}},"mdx":null},"pageContext":{"templatePath":"/developers/contributing"}},"staticQueryHashes":["1639663795"],"slicesMap":{}}